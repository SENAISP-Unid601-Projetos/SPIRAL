var colunaW = new Image();
colunaW.src="IMG/tilesF.png";


let floorCol=17;
let floorLin=11;
let floorX = 320;
let floorSize = 50;
let Pres = [[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0],
            [0,0,0,3,0,2,1,1,1,1,1,0,0,3,0,0,0],
            [0,0,0,0,0,2,0,2,0,2,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,2,0,2,0,1,2,0,0,0,0,0],
            [0,0,0,0,0,2,0,2,0,2,1,0,0,0,0,0,0],
            [0,0,0,3,0,2,1,1,1,1,1,0,0,3,0,0,0],
            [0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],

            [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,0,0],
            [0,0,1,0,0,2,0,2,0,2,0,2,0,0,1,0,0],
            [0,0,0,0,3,0,2,0,2,0,2,0,3,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,3,0,2,0,2,0,2,0,3,0,0,0,0],
            [0,0,1,0,0,2,0,2,0,2,0,2,0,0,1,0,0],
            [0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],
        
            [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
             [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
             [0,0,3,0,0,0,0,0,0,0,0,0,0,0,3,0,0],
             [0,0,0,1,0,0,2,0,2,0,2,0,0,1,0,0,0],
             [0,0,0,1,0,0,0,2,0,2,0,0,0,1,0,0,0],
             [0,0,0,1,1,1,1,0,2,0,1,1,1,1,0,0,0],
             [0,0,0,1,0,0,0,2,0,2,0,0,0,1,0,0,0],
             [0,0,0,1,0,0,2,0,2,0,2,0,0,1,0,0,0],
             [0,0,3,0,0,0,0,0,0,0,0,0,0,0,3,0,0],
             [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
             [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],

             [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
             [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
             [0,0,1,2,0,1,0,0,1,0,0,1,0,2,1,0,0],
             [0,0,0,3,0,0,0,0,2,0,0,0,0,3,0,0,0],
             [0,0,0,0,2,0,2,0,2,0,2,0,2,0,0,0,0],
             [0,0,1,2,0,1,0,2,0,2,0,1,0,2,1,0,0],
             [0,0,0,0,2,0,2,0,2,0,2,0,2,0,0,0,0],
             [0,0,0,3,0,0,0,0,2,0,0,0,0,3,0,0,0],
             [0,0,1,2,0,1,0,0,1,0,0,1,0,2,1,0,0],
             [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
             [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],

             [[0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0],
             [0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],
             [0,0,3,0,0,0,0,0,0,0,0,0,0,1,0,0,0],
             [0,0,0,0,2,0,2,0,2,0,2,0,2,1,0,0,0],
             [0,0,0,0,0,2,0,2,0,2,0,2,0,1,0,0,0],
             [0,0,0,1,1,1,2,0,2,0,2,1,1,1,0,0,0],
             [0,0,0,1,0,2,0,2,0,2,0,2,0,0,0,0,0],
             [0,0,0,1,2,0,2,0,2,0,2,0,2,0,0,0,0],
             [0,0,0,1,0,0,0,0,0,0,0,0,0,0,3,0,0],
             [0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],
             [0,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0]],

           [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,0,2,1,0,0],
            [0,0,1,0,2,0,2,0,2,0,2,1,2,0,1,0,0],
            [0,0,1,2,0,2,0,2,0,2,0,1,0,2,1,0,0],
            [0,0,1,0,2,1,2,0,3,0,2,1,2,0,1,0,0],
            [0,0,1,2,0,1,0,2,0,2,0,2,0,2,1,0,0],
            [0,0,1,0,2,1,2,0,2,0,2,0,2,0,1,0,0],
            [0,0,1,2,0,1,1,1,1,1,1,1,1,1,1,0,0],
            [0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0]],

            [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,1,1,0,0,3,0,0,1,1,0,0,0,0],
            [0,0,0,1,0,2,0,0,2,0,0,2,0,1,0,0,0],
            [0,0,0,0,2,0,2,0,2,0,2,0,2,0,0,0,0],
            [0,0,0,0,2,2,0,2,0,2,0,2,2,0,0,0,0],
            [0,0,0,0,2,0,2,0,2,0,2,0,2,0,0,0,0],
            [0,0,0,1,0,2,0,0,2,0,0,2,0,1,0,0,0],
            [0,0,0,0,1,1,0,0,3,0,0,1,1,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],

            [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0],
            [0,0,0,0,1,1,1,0,3,0,1,1,1,0,0,0,0],
            [0,0,1,1,1,2,0,2,0,2,0,2,1,1,1,0,0],
            [0,0,0,0,0,0,2,0,2,0,2,0,0,0,0,0,0],
            [0,0,0,0,3,2,0,2,0,2,0,2,3,0,0,0,0],
            [0,0,0,0,0,0,2,0,2,0,2,0,0,0,0,0,0],
            [0,0,1,1,1,2,0,2,0,2,0,2,1,1,1,0,0],
            [0,0,0,0,1,1,1,0,3,0,1,1,1,0,0,0,0],
            [0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]
        ];

var Walls = [];
var Spawns = [];
var SpawnsMercador = [];


function Barreiras(){
    var BarreiraAleatoria = Math.floor(Math.random()*8);
    Spawnar(BarreiraAleatoria);
    Paredes(BarreiraAleatoria);
    SpawnMercador(BarreiraAleatoria);
}

function Spawnar(a){
    Spawns = [];
    for(c=0;c<floorLin;c++){
        for(r=0;r<floorCol;r++){
            if(Pres[a][c][r]==2){
                Spawns.push({x:r,y:c});
            }
        }
    }
}

function SpawnMercador(a){
    SpawnsMercador = [];
    for(c=0;c<floorLin;c++){
        for(r=0;r<floorCol;r++){
            if(Pres[a][c][r]==3){
                SpawnsMercador.push({x:r,y:c});
            }
        }
    }
}


function Paredes(a){
    Walls=[];
    for(c=0;c<floorLin;c++){
        for(r=0;r<floorCol;r++){
            if(Pres[a][c][r]==1){
                Walls.push({x:r,y:c});
            }
        }
    }
}

Barreiras();


function DrawTiles(){


    Walls.forEach(wall => {
        ctx.drawImage(colunaW,50*fundoRecorte,0,50,50,325+wall.x * floorSize, 75+wall.y * floorSize, floorSize, floorSize);
    });
}


function isWall(x, y) {
    return Walls.some(wall => 
        x < 325+(wall.x + 1) * floorSize && 
        x + player.size > 325+wall.x * floorSize && 
        y < 75+(wall.y + 1) *  floorSize && 
        y + player.size > 75+wall.y *  floorSize
    );
}

